<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../assets/css/touch trends-practice.css" />
  </head>
  <body>
    <body>
      <div class="header">
        <h1>THE LONGEST DOG ON THE INTERNET</h1>
        <p>Life looks better 8 inches off the ground.</p>
      </div>

      <div class="parallax-bg">
        <div>Short legs. Big attitude.</div>
      </div>

      <div class="content">
        <h2>Meet the Dog</h2>
        <p>
          He‚Äôs small. He‚Äôs stubborn. He‚Äôs basically a hotdog with feelings. A
          dachshund who believes every couch belongs to him ‚Äî and every walk
          should last forever.
        </p>

        <h2>The Mission</h2>
        <p>
          To celebrate short legs and long stories. We‚Äôre here to prove that
          being low to the ground doesn‚Äôt mean aiming low. Every stretch, every
          nap, every bark ‚Äî a lesson in confidence.
        </p>

        <div class="flip-card">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <h2>Do you wanna see me?</h2>
            </div>
            <div class="flip-card-back">
              <img
                src="https://ik.imagekit.io/b2yvy7rmf/perro%20salchica.jpg?updatedAt=1762280021910"
                alt="Foto"
              />
            </div>
          </div>
        </div>
        <div class="reflection">
          <strong>Fun Facts:</strong>
          <br />
          üêæ Can jump higher than you‚Äôd expect (and will do it anyway).
          <br />
          üå≠Thinks he‚Äôs a wolf. Is definitely not a wolf.
          <br />
          üí§ Sleeps 18 hours a day. Still tired.
          <br />
          ‚ù§Ô∏è Loves you. On his own terms.
        </div>
      </div>

      <div class="normal-bg">
        <div>Adopt, Don‚Äôt Scroll Past</div>
      </div>

      <div class="content">
        <h2>Why adopt a dachshund?</h2>
        <p>
          ‚ù§Ô∏è They fit perfectly under any blanket.
          <br />
          ‚ù§Ô∏è Their loyalty stretches farther than their bodies.
          <br />
          ‚ù§Ô∏è Every day becomes a comedy show (you‚Äôre the audience).
        </p>

        <div class="comparison">
          <h3>KHow to Adopt a Dachshund:</h3>
          <ul>
            <ul>
              <strong>1. Meet the Wiggle:</strong>
              Scroll through our list of charming sausages. Each one comes with
              a personality longer than their body.
            </ul>
            <ul>
              <strong>2. Fill the Form:</strong>
              Tell us about your home, your vibe, and how many snacks you‚Äôre
              willing to share.
            </ul>
            <ul>
              <strong>3. Go Home Together:</strong>
              Congratulations ‚Äî you‚Äôre now part of the long-life club. Expect
              cuddles, chaos, and unconditional (selective) love.
            </ul>
          </ul>
        </div>

        <h2>Mobile Considerations</h2>
        <p>
          On mobile devices,
          <code>background-attachment: fixed</code>
          often doesn't work due to browser limitations. The CSS in this demo
          automatically switches to regular scrolling on smaller screens to
          ensure a good experience for all users.
        </p>

        <div class="reflection">
          <strong>Critical Design Question:</strong>
          Is the parallax effect truly enhancing the user experience, or could
          it be a barrier? Consider users with vestibular disorders who may
          experience discomfort with motion effects. How might we offer
          alternatives or respect the
          <code>prefers-reduced-motion</code>
          media query?
        </div>
      </div>

      <!-- JavaScript-based Parallax with Multiple Layers -->
      <div class="parallax-js-section" id="js-parallax">
        <div class="parallax-layer layer-back" data-speed="0.2">üåå</div>
        <div class="parallax-layer layer-middle" data-speed="0.5">‚òÅÔ∏è</div>
        <div class="parallax-layer layer-front" data-speed="0.8">
          JavaScript Parallax
        </div>
        <div class="speed-indicator">
          Scroll to see 3 layers moving at different speeds
        </div>
      </div>

      <div class="content">
        <h2>Technique 2: JavaScript Parallax with transform</h2>
        <p>
          The section above uses
          <strong>
            JavaScript with
            <code>transform: translateY()</code>
          </strong>
          to move elements at different speeds. This offers more control than
          pure CSS.
        </p>

        <div class="code-box">
          <code>
            // Each layer has a data-speed attribute
            <br />
            const layer = document.querySelector('.layer-back');
            <br />
            const speed = layer.dataset.speed; // 0.2 = very slow
            <br />
            <br />
            window.addEventListener('scroll', () =&gt; {
            <br />
            &nbsp;&nbsp;const scrolled = window.pageYOffset;
            <br />
            &nbsp;&nbsp;const yPos = -(scrolled * speed);
            <br />
            &nbsp;&nbsp;layer.style.transform = `translateY(${yPos}px)`;
            <br />
            });
          </code>
        </div>

        <div class="comparison">
          <h3>Advantages of JavaScript Parallax:</h3>
          <ul>
            <li>
              <strong>Precise Control:</strong>
              You can control exactly how fast each layer moves
            </li>
            <li>
              <strong>Multiple Elements:</strong>
              Move any HTML element, not just backgrounds
            </li>
            <li>
              <strong>Works on Mobile:</strong>
              Unlike
              <code>background-attachment: fixed</code>
            </li>
            <li>
              <strong>Complex Animations:</strong>
              Combine with opacity, scale, rotation, etc.
            </li>
          </ul>
          <h3>‚ö†Ô∏è Considerations:</h3>
          <ul>
            <li>Requires JavaScript (fallback if JS is disabled)</li>
            <li>
              Use
              <code>requestAnimationFrame</code>
              for better performance
            </li>
            <li>
              Respect
              <code>prefers-reduced-motion</code>
            </li>
          </ul>
        </div>
      </div>

      <!-- Image-based Parallax Layers -->
      <div class="parallax-image-section" id="image-parallax">
        <div class="image-layer image-layer-1" data-speed="0.3"></div>
        <div class="image-layer image-layer-2" data-speed="0.6"></div>
        <div class="image-layer image-layer-3" data-speed="0.9"></div>
        <div class="speed-indicator">
          3 image layers ‚Ä¢ Speeds: slow (0.3) ‚Üí medium (0.6) ‚Üí fast (0.9)
        </div>
      </div>

      <div class="content">
        <h2>Technique 3: Multi-Layer Images</h2>
        <p>
          The section above combines multiple background images moving at
          different speeds to create a 3D depth effect.
        </p>

        <div class="comparison">
          <h3>üìä Comparison of All 3 Techniques:</h3>
          <table
            style="width: 100%; border-collapse: collapse; margin-top: 1rem"
          >
            <tbody>
              <tr style="background: #f8f9fa; font-weight: bold">
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  Technique
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  Implementation
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  Mobile Support
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  Complexity
                </td>
              </tr>
              <tr>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  <strong>CSS Fixed</strong>
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  background-attachment: fixed
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  ‚ùå Limited
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  ‚≠ê Very simple
                </td>
              </tr>
              <tr>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  <strong>JS Transform</strong>
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  transform: translateY()
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  ‚úÖ Works
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  ‚≠ê‚≠ê Medium
                </td>
              </tr>
              <tr>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  <strong>Multi-layer</strong>
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  Multiple elements + JS
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  ‚úÖ Works
                </td>
                <td style="padding: 0.75rem; border: 1px solid #dee2e6">
                  ‚≠ê‚≠ê‚≠ê Advanced
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="reflection">
          <strong>Final Reflection:</strong>
          Which technique do you prefer? CSS is perfect for simple sites.
          JavaScript offers full control but requires more code. Multi-layer
          creates the most impressive effects but may impact performance.
          <strong>The best choice depends on your specific project.</strong>
        </div>
      </div>

      <script>
        // Check for reduced motion preference
        const prefersReducedMotion = window.matchMedia(
          "(prefers-reduced-motion: reduce)"
        );
        let isReducedMotion = prefersReducedMotion.matches;

        // Handle CSS-based parallax
        function handleMotionPreference() {
          const parallaxElements = document.querySelectorAll(".parallax-bg");

          if (isReducedMotion) {
            // User prefers reduced motion - disable parallax
            parallaxElements.forEach((el) => {
              el.style.backgroundAttachment = "scroll";
            });
            console.log("Parallax disabled: user prefers reduced motion");
          }
        }

        // JavaScript-based Parallax Implementation
        function initParallax() {
          if (isReducedMotion) {
            console.log(
              "JS Parallax disabled: respecting reduced motion preference"
            );
            return;
          }

          const parallaxLayers = document.querySelectorAll(
            ".parallax-layer, .image-layer"
          );
          let ticking = false;

          function updateParallax() {
            parallaxLayers.forEach((layer) => {
              const speed = parseFloat(layer.dataset.speed) || 0.5;
              const section = layer.parentElement;
              const rect = section.getBoundingClientRect();

              // Only animate when section is in viewport
              if (rect.top < window.innerHeight && rect.bottom > 0) {
                // Calculate scroll position relative to section's position
                const sectionTop = section.offsetTop;
                const scrolled = window.pageYOffset;
                const offset = scrolled - sectionTop;
                const yPos = offset * speed * 0.5; // Multiply by 0.5 to reduce movement

                // Use transform for better performance
                layer.style.transform = `translateY(${yPos}px)`;
              }
            });

            ticking = false;
          }

          function requestTick() {
            if (!ticking) {
              requestAnimationFrame(updateParallax);
              ticking = true;
            }
          }

          // Throttle scroll events using requestAnimationFrame
          window.addEventListener("scroll", requestTick, { passive: true });

          // Initial update
          updateParallax();
        }

        // Initialize everything
        handleMotionPreference();
        initParallax();

        // Listen for motion preference changes
        prefersReducedMotion.addEventListener("change", (e) => {
          isReducedMotion = e.matches;
          handleMotionPreference();

          if (isReducedMotion) {
            // Reset all transforms
            document
              .querySelectorAll(".parallax-layer, .image-layer")
              .forEach((layer) => {
                layer.style.transform = "translateY(0)";
              });
          } else {
            initParallax();
          }
        });

        // Log performance info for learning
        console.log("üé¨ Parallax Demo Loaded");
        console.log(
          "üìä Layers detected:",
          document.querySelectorAll(".parallax-layer, .image-layer").length
        );
        console.log(
          "‚ôø Reduced motion:",
          isReducedMotion ? "ENABLED" : "DISABLED"
        );
      </script>
    </body>
  </body>
</html>
